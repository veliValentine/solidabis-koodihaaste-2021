(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{42:function(e,t,r){},43:function(e,t,r){"use strict";r.r(t);var n,c=r(1),a=r.n(c),i=r(17),s=r.n(i),o=r(8),u=r(2),l=function(){var e=Object(c.useState)(null),t=Object(u.a)(e,2),r=t[0],a=t[1];Object(c.useEffect)((function(){return function(){return clearTimeout(n)}}),[]);var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;clearTimeout(n),n=setTimeout((function(){return a(null)}),1e3*e)};return[r,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;a(e),i(t)}]},j="koodihaaste:dataHistory",d={getHistory:function(){var e=localStorage.getItem(j);return e?JSON.parse(atob(e)):[]},saveHistory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e.length)throw new Error("No history to save");localStorage.setItem(j,btoa(JSON.stringify(e)))},clearHistory:function(){localStorage.removeItem(j)}},b=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),r=t[0],n=t[1];Object(c.useEffect)((function(){var e=d.getHistory();e&&n(e)}),[]),Object(c.useEffect)((function(){r.length&&d.saveHistory(r)}),[r]);return[r,function(){for(var e=arguments.length,t=new Array(e),c=0;c<e;c++)t[c]=arguments[c];var a=t.filter((function(e){return e}));a.length&&n(a.concat(r))},function(){d.clearHistory(),n([])}]},h=r(4),v=r.n(h),f=r(5),O=r(6),x=r.n(O),p="/api/v1/cars",m={cars:function(){var e=Object(f.a)(v.a.mark((function e(){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get(p);case 3:return t=e.sent,r=t.data,e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0),new Error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),consumption:function(){var e=Object(f.a)(v.a.mark((function e(t,r,n){var c,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("".concat(p,"/").concat(t,"/").concat(r,"/").concat(n));case 3:return c=e.sent,a=c.data,e.abrupt("return",a);case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0,"poop"),new Error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n){return e.apply(this,arguments)}}(),compare:function(){var e=Object(f.a)(v.a.mark((function e(t,r,n,c){var a,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("".concat(p,"/").concat(t,"/").concat(r,"/").concat(n,"/").concat(c));case 3:return a=e.sent,i=a.data,e.abrupt("return",i);case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0),new Error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n,c){return e.apply(this,arguments)}}()},y=function(e,t){var r=Object(c.useState)(null),n=Object(u.a)(r,2),a=n[0],i=n[1],s=Object(c.useState)(null),o=Object(u.a)(s,2),l=o[0],j=o[1],d=Object(c.useState)(null),b=Object(u.a)(d,2),h=b[0],O=b[1],x=function(){var e=Object(f.a)(v.a.mark((function e(){var t,r,n,c,a,i=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:{},r=t.vehicle,n=t.distance,c=t.velocity1,a=t.velocity2,e.prev=2,!a){e.next=9;break}return e.t0=y,e.next=7,m.compare(r,n,c,a);case 7:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 9:if(!c){e.next=15;break}return e.t2=y,e.next=13,m.consumption(r,n,c);case 13:return e.t3=e.sent,e.abrupt("return",(0,e.t2)(e.t3));case 15:return e.abrupt("return",y());case 18:e.prev=18,e.t4=e.catch(2),p(e.t4);case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(){return e.apply(this,arguments)}}(),p=function(t){if(t instanceof Error){var r=t.message;r.includes("status code 500")?e("server not responding"):r.includes("status code 400")?e("invalid input values"):e(t.message)}else x("An error happened")},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.data1,n=void 0===r?null:r,c=e.data2,a=void 0===c?null:c,s=e.difference,o=void 0===s?null:s;i(n),j(a),t(n,a),O(o)};return[{data1:a,data2:l,difference:h},x]},g=r(0),w=function(e){var t=e.id,r=e.value,n=e.setValue,c=e.required,a=void 0!==c&&c,i=e.placeholder,s=void 0===i?"":i,o=e.label,u=void 0===o?"":o,l=e.min,j=void 0===l?0:l,d=e.max,b=void 0===d?500:d,h=function(e){return n(e.target.value)};return Object(g.jsxs)("div",{className:"number-inputs",children:[Object(g.jsx)("label",{htmlFor:t,children:u}),Object(g.jsx)("input",{id:t,type:"number",value:r,placeholder:s,onChange:h,min:j,max:b,step:"0.1",required:a}),Object(g.jsx)("input",{type:"range",value:r,placeholder:s,onChange:h,min:j,max:"500",step:"10",required:a})]})},k=function(e){var t=e.submit,r=Object(c.useState)(100),n=Object(u.a)(r,2),a=n[0],i=n[1],s=Object(c.useState)(100),o=Object(u.a)(s,2),l=o[0],j=o[1],d=Object(c.useState)(0),b=Object(u.a)(d,2),h=b[0],v=b[1],f=Object(g.jsxs)("span",{children:["Enter second velocity (km/h) ",Object(g.jsx)("abbr",{title:"optional",children:"*"}),": "]});return Object(g.jsxs)("form",{className:"consumption-form",onSubmit:function(e){e.preventDefault(),t({distance:Number(a),velocity1:Number(l),velocity2:Number(h)})},children:[Object(g.jsx)(w,{id:"distance",value:a,setValue:i,placeholder:"Distance (km/h)",label:"Enter distance (km): ",required:!0,min:.1}),Object(g.jsx)(w,{id:"velocity1",value:l,setValue:j,placeholder:"Velocity (km/h)",label:"Enter first velocity (km/h): ",required:!0,min:1,max:3e4}),Object(g.jsx)(w,{id:"velocity2",value:h,setValue:v,placeholder:"Velocity (km/h)",label:f,max:3e4}),Object(g.jsx)("button",{type:"submit",children:"Submit"})]})},S=function(e){var t=e.children;return Object(g.jsx)("thead",{children:Object(g.jsx)("tr",{children:t})})},N=function(e){var t=e.children;return Object(g.jsx)("tbody",{children:t})},E=function(e,t){return Object(g.jsx)("tr",{children:Object(g.jsx)("td",{children:e})},t)},H=function(e){var t=e.value,r=e.text,n=void 0===r?"Velocity: ":r;return Object(g.jsxs)("span",{children:[n,t,"km/h"]})},C=function(e){var t=e.value,r=e.text,n=void 0===r?"Distance: ":r;return Object(g.jsxs)("span",{children:[n,t.toFixed(1),"km"]})},V=function(e){var t=e.value,r=e.difference,n=e.text,c=void 0===n?"Time: ":n,a=r?F(t):"",i=D(Math.abs(t)),s=Object(u.a)(i,3),o=s[0],l=s[1],j=s[2],d=o?"".concat(o," days "):"";return Object(g.jsxs)("span",{children:[c,d," ",l," hours and ",j," minutes ",a]})},F=function(e){return 0===e?"":e<0?"faster":"slower"},D=function(e){if(e<0)throw new Error("time is less than zero");var t=Math.floor(e/24);e-=24*t;var r=Math.floor(e);return e-=r,[t,r,Math.ceil(60*e)]},q=function(e){var t=e.value,r=e.text,n=void 0===r?"Fuel: ":r;return Object(g.jsxs)("span",{children:[n,t.toFixed(2)," liters"]})},I=function(e){var t=e.data,r=t.velocity,n=t.distance,c=t.time,a=t.fuel,i=[Object(g.jsx)(C,{value:n}),Object(g.jsx)(V,{value:c}),Object(g.jsx)(q,{value:a})].map(E);return Object(g.jsxs)("table",{className:"consumption",children:[Object(g.jsx)(S,{children:Object(g.jsx)("th",{children:Object(g.jsx)(H,{value:r})})}),Object(g.jsx)(N,{children:i})]})},M=function(e){var t=e.difference,r=t.time,n=t.fuel,c=[Object(g.jsx)(V,{value:r,difference:!0}),Object(g.jsx)(q,{value:n})].map(E);return Object(g.jsxs)("table",{className:"difference",children:[Object(g.jsx)(S,{children:Object(g.jsx)("th",{children:"Difference"})}),Object(g.jsx)(N,{children:c})]})},T=(r(42),function(e){var t=e.data,r=t.data1,n=t.data2,c=t.difference;return r?r&&(!n||!c)?Object(g.jsx)("div",{className:"results",children:Object(g.jsx)(I,{data:r})}):Object(g.jsxs)("div",{className:"results",children:[Object(g.jsx)(I,{data:r}),Object(g.jsx)(I,{data:n}),Object(g.jsx)(M,{difference:c})]}):null}),J=function(e){var t=Object(c.useState)([]),r=Object(u.a)(t,2),n=r[0],a=r[1];Object(c.useEffect)((function(){i()}),[]);var i=function(){var t=Object(f.a)(v.a.mark((function t(){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.cars();case 3:(r=t.sent)&&a(r),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e("Could not get vehicle information from server.");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return[n,i]},A=function(e){var t=e.submit,r=e.updateError,n=J(r),c=Object(u.a)(n,1)[0];if(!c)return null;var a=c.map((function(e){var t=e.id;return Object(g.jsx)("option",{value:t,children:t},t)}));return Object(g.jsxs)("div",{className:"vehicle-form",children:[Object(g.jsx)("label",{htmlFor:"vehicle",children:"Choose vehicle: "}),Object(g.jsxs)("select",{id:"vehicle",onChange:function(e){return t(e.target.value.toUpperCase())},children:[Object(g.jsx)("option",{value:"",children:"Select vehicle"}),a]})]})},U=function(e){var t=e.history,r=void 0===t?[]:t,n=e.clearHistory;if(r.length<1)return null;return Object(g.jsx)("div",{className:"history-buttons",children:Object(g.jsx)("button",{onClick:function(e){e.preventDefault(),n()},type:"button",children:"Clear history"})})},z=function(e){var t=e.history,r=void 0===t?[]:t;return r.length?Object(g.jsxs)("table",{className:"history-table",children:[Object(g.jsxs)(S,{children:[Object(g.jsx)("th",{children:"Vehicle"}),Object(g.jsx)("th",{children:"Distance"}),Object(g.jsx)("th",{children:"Velocity"}),Object(g.jsx)("th",{children:"Time"}),Object(g.jsx)("th",{children:"Fuel"})]}),Object(g.jsx)(N,{children:r.map((function(e,t){return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:e.carId}),Object(g.jsx)("td",{children:Object(g.jsx)(C,{value:e.distance,text:""})}),Object(g.jsx)("td",{children:Object(g.jsx)(H,{value:e.velocity,text:""})}),Object(g.jsx)("td",{children:Object(g.jsx)(V,{value:e.time,text:""})}),Object(g.jsx)("td",{children:Object(g.jsx)(q,{value:e.fuel,text:""})})]},t)}))})]}):Object(g.jsx)("p",{children:"Nothing to show..."})},B=function(e){var t=e.history,r=void 0===t?[]:t,n=e.clearHistory;return Object(g.jsxs)("div",{className:"history",children:[Object(g.jsx)("h2",{children:"History"}),Object(g.jsx)(U,{history:r,clearHistory:n}),Object(g.jsx)(z,{history:r.slice(0,5)})]})},W=function(e){var t=e.message;return t?Object(g.jsx)("div",{className:"error",children:Object(g.jsx)("p",{style:{color:"red"},children:t})}):null},G=function(){var e=l(),t=Object(u.a)(e,2),r=t[0],n=t[1],a=b(),i=Object(u.a)(a,3),s=i[0],j=i[1],d=i[2],h=y(n,j),v=Object(u.a)(h,2),f=v[0],O=v[1],x=Object(c.useState)("A"),p=Object(u.a)(x,2),m=p[0],w=p[1],S=m&&f.data1;return Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:" Welcome!"}),Object(g.jsx)(W,{message:r}),Object(g.jsx)(A,{submit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";w(e.toUpperCase()),O()},updateError:n}),Object(g.jsx)("hr",{}),Object(g.jsx)("h2",{children:m}),m?Object(g.jsx)(k,{submit:function(e){return O(Object(o.a)(Object(o.a)({},e),{},{vehicle:m}))}}):null,S?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("hr",{}),Object(g.jsx)(T,{data:f})]}):null,Object(g.jsx)("hr",{}),Object(g.jsx)(B,{history:s,clearHistory:d})]})};s.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(G,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.d0e1638f.chunk.js.map