(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{60:function(e,t,r){},61:function(e,t,r){"use strict";r.r(t);var n,c=r(1),a=r.n(c),s=r(29),i=r.n(s),l=r(2),o=r(13),u=r(3),j=function(){var e=Object(c.useState)(null),t=Object(l.a)(e,2),r=t[0],a=t[1];Object(c.useEffect)((function(){return function(){return clearTimeout(n)}}),[]);var s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;clearTimeout(n),n=setTimeout((function(){return a(null)}),1e3*e)};return[r,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;a(e),s(t)}]},d="koodihaaste:dataHistory",b={getHistory:function(){var e=localStorage.getItem(d);return e?JSON.parse(atob(e)):[]},saveHistory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e.length)throw new Error("No history to save");localStorage.setItem(d,btoa(JSON.stringify(e)))},clearHistory:function(){localStorage.removeItem(d)}},h=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),r=t[0],n=t[1];Object(c.useEffect)((function(){var e=b.getHistory();e&&n(e)}),[]),Object(c.useEffect)((function(){r.length&&b.saveHistory(r)}),[r]);return[r,function(){for(var e=arguments.length,t=new Array(e),c=0;c<e;c++)t[c]=arguments[c];var a=t.filter((function(e){return e}));a.length&&n(a.concat(r))},function(){b.clearHistory(),n([])}]},v=r(0),O=function(e){var t=e.value,r=e.text,n=void 0===r?"Velocity: ":r;return Object(v.jsxs)("span",{children:[n,t,"km/h"]})},f=function(e){var t=e.value,r=e.text,n=void 0===r?"Distance: ":r;return Object(v.jsxs)("span",{children:[n,t.toFixed(1),"km"]})},x=function(e){var t=e.value,r=e.difference,n=e.text,c=void 0===n?"Time: ":n,a=r?p(t):"",s=m(Math.abs(t)),i=Object(l.a)(s,3),o=i[0],u=i[1],j=i[2],d=o?"".concat(o," days "):"";return Object(v.jsxs)("span",{children:[c,d," ",u," hours and ",j," minutes ",a]})},p=function(e){return 0===e?"":e<0?"faster":"slower"},m=function(e){if(e<0)throw new Error("time is less than zero");var t=Math.floor(e/24);e-=24*t;var r=Math.floor(e);return e-=r,[t,r,Math.ceil(60*e)]},y=function(e){var t=e.value,r=e.text,n=void 0===r?"Fuel: ":r;return Object(v.jsxs)("span",{children:[n,t.toFixed(2)," liters"]})},g=function(e){var t=e.children;return Object(v.jsx)("thead",{children:Object(v.jsx)("tr",{children:t})})},w=function(e){var t=e.children;return Object(v.jsx)("tbody",{children:t})},N=function(e,t){return Object(v.jsx)("tr",{children:Object(v.jsx)("td",{children:e})},t)},k=function(e){var t=e.history,r=void 0===t?[]:t,n=e.clearHistory;if(r.length<1)return null;return Object(v.jsx)("div",{className:"history-buttons",children:Object(v.jsx)("button",{onClick:function(e){e.preventDefault(),n()},type:"button",children:"Clear history"})})},S=function(e){var t=e.history,r=void 0===t?[]:t;return r.length?Object(v.jsxs)("table",{className:"history-table",children:[Object(v.jsxs)(g,{children:[Object(v.jsx)("th",{children:"Vehicle"}),Object(v.jsx)("th",{children:"Distance"}),Object(v.jsx)("th",{children:"Velocity"}),Object(v.jsx)("th",{children:"Time"}),Object(v.jsx)("th",{children:"Fuel"})]}),Object(v.jsx)(w,{children:r.map((function(e,t){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.carId}),Object(v.jsx)("td",{children:Object(v.jsx)(f,{value:e.distance,text:""})}),Object(v.jsx)("td",{children:Object(v.jsx)(O,{value:e.velocity,text:""})}),Object(v.jsx)("td",{children:Object(v.jsx)(x,{value:e.time,text:""})}),Object(v.jsx)("td",{children:Object(v.jsx)(y,{value:e.fuel,text:""})})]},t)}))})]}):Object(v.jsx)("p",{children:"Nothing to show..."})},E=function(e){var t=e.history,r=void 0===t?[]:t,n=e.clearHistory;return Object(v.jsxs)("div",{className:"history",children:[Object(v.jsx)("h2",{children:"History"}),Object(v.jsx)(k,{history:r,clearHistory:n}),Object(v.jsx)(S,{history:r.slice(0,5)})]})},H=function(e){var t=e.message;return t?Object(v.jsx)("div",{className:"error",children:Object(v.jsx)("p",{style:{color:"red"},children:t})}):null},C=function(){return Object(v.jsx)("nav",{className:"navbar",children:Object(v.jsxs)("ul",{children:[Object(v.jsx)("li",{children:Object(v.jsx)(o.b,{to:"/",children:"Home"})}),Object(v.jsx)("li",{children:Object(v.jsx)(o.b,{to:"/history",children:"History"})})]})})},V=r(19),F=r(7),D=r.n(F),q=r(10),I=r(14),M=r.n(I),T="/api/v1/cars",J={cars:function(){var e=Object(q.a)(D.a.mark((function e(){var t,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.get(T);case 3:return t=e.sent,r=t.data,e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0),new Error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),consumption:function(){var e=Object(q.a)(D.a.mark((function e(t,r,n){var c,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.get("".concat(T,"/").concat(t,"/").concat(r,"/").concat(n));case 3:return c=e.sent,a=c.data,e.abrupt("return",a);case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0,"poop"),new Error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n){return e.apply(this,arguments)}}(),compare:function(){var e=Object(q.a)(D.a.mark((function e(t,r,n,c){var a,s;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.get("".concat(T,"/").concat(t,"/").concat(r,"/").concat(n,"/").concat(c));case 3:return a=e.sent,s=a.data,e.abrupt("return",s);case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0),new Error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n,c){return e.apply(this,arguments)}}()},A=function(e,t){var r=Object(c.useState)(null),n=Object(l.a)(r,2),a=n[0],s=n[1],i=Object(c.useState)(null),o=Object(l.a)(i,2),u=o[0],j=o[1],d=Object(c.useState)(null),b=Object(l.a)(d,2),h=b[0],v=b[1],O=function(){var e=Object(q.a)(D.a.mark((function e(){var t,r,n,c,a,s=arguments;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:{},r=t.vehicle,n=t.distance,c=t.velocity1,a=t.velocity2,e.prev=2,!a){e.next=9;break}return e.t0=x,e.next=7,J.compare(r,n,c,a);case 7:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 9:if(!c){e.next=15;break}return e.t2=x,e.next=13,J.consumption(r,n,c);case 13:return e.t3=e.sent,e.abrupt("return",(0,e.t2)(e.t3));case 15:return e.abrupt("return",x());case 18:e.prev=18,e.t4=e.catch(2),f(e.t4);case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(){return e.apply(this,arguments)}}(),f=function(t){if(t instanceof Error){var r=t.message;r.includes("status code 500")?e("server not responding"):r.includes("status code 400")?e("invalid input values"):e(t.message)}else O("An error happened")},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.data1,n=void 0===r?null:r,c=e.data2,a=void 0===c?null:c,i=e.difference,l=void 0===i?null:i;s(n),j(a),t(n,a),v(l)};return[{data1:a,data2:u,difference:h},O]},R=function(e){var t=e.id,r=e.value,n=e.setValue,c=e.required,a=void 0!==c&&c,s=e.placeholder,i=void 0===s?"":s,l=e.label,o=void 0===l?"":l,u=e.min,j=void 0===u?0:u,d=e.max,b=void 0===d?500:d,h=function(e){return n(e.target.value)};return Object(v.jsxs)("div",{className:"number-inputs",children:[Object(v.jsx)("label",{htmlFor:t,children:o}),Object(v.jsx)("input",{id:t,type:"number",value:r,placeholder:i,onChange:h,min:j,max:b,step:"0.1",required:a}),Object(v.jsx)("input",{type:"range",value:r,placeholder:i,onChange:h,min:j,max:"500",step:"10",required:a})]})},U=function(e){var t=e.submit,r=Object(c.useState)(100),n=Object(l.a)(r,2),a=n[0],s=n[1],i=Object(c.useState)(100),o=Object(l.a)(i,2),u=o[0],j=o[1],d=Object(c.useState)(0),b=Object(l.a)(d,2),h=b[0],O=b[1],f=Object(v.jsxs)("span",{children:["Enter second velocity (km/h) ",Object(v.jsx)("abbr",{title:"optional",children:"*"}),": "]});return Object(v.jsxs)("form",{className:"consumption-form",onSubmit:function(e){e.preventDefault(),t({distance:Number(a),velocity1:Number(u),velocity2:Number(h)})},children:[Object(v.jsx)(R,{id:"distance",value:a,setValue:s,placeholder:"Distance (km/h)",label:"Enter distance (km): ",required:!0,min:.1}),Object(v.jsx)(R,{id:"velocity1",value:u,setValue:j,placeholder:"Velocity (km/h)",label:"Enter first velocity (km/h): ",required:!0,min:1,max:3e4}),Object(v.jsx)(R,{id:"velocity2",value:h,setValue:O,placeholder:"Velocity (km/h)",label:f,max:3e4}),Object(v.jsx)("button",{type:"submit",children:"Submit"})]})},z=function(e){var t=e.data,r=t.velocity,n=t.distance,c=t.time,a=t.fuel,s=[Object(v.jsx)(f,{value:n}),Object(v.jsx)(x,{value:c}),Object(v.jsx)(y,{value:a})].map(N);return Object(v.jsxs)("table",{className:"consumption",children:[Object(v.jsx)(g,{children:Object(v.jsx)("th",{children:Object(v.jsx)(O,{value:r})})}),Object(v.jsx)(w,{children:s})]})},B=function(e){var t=e.difference,r=t.time,n=t.fuel,c=[Object(v.jsx)(x,{value:r,difference:!0}),Object(v.jsx)(y,{value:n})].map(N);return Object(v.jsxs)("table",{className:"difference",children:[Object(v.jsx)(g,{children:Object(v.jsx)("th",{children:"Difference"})}),Object(v.jsx)(w,{children:c})]})},W=(r(60),function(e){var t=e.data,r=t.data1,n=t.data2,c=t.difference;return r?r&&(!n||!c)?Object(v.jsxs)("div",{className:"results",children:[Object(v.jsx)("h2",{children:"Results:"}),Object(v.jsx)("div",{className:"results-data",children:Object(v.jsx)(z,{data:r})})]}):Object(v.jsxs)("div",{className:"results",children:[Object(v.jsx)("h2",{children:"Results:"}),Object(v.jsxs)("div",{className:"results-data",children:[Object(v.jsx)(z,{data:r}),Object(v.jsx)(z,{data:n}),Object(v.jsx)(B,{difference:c})]})]}):null}),G=function(e){var t=Object(c.useState)([]),r=Object(l.a)(t,2),n=r[0],a=r[1];return Object(c.useEffect)((function(){(function(){var t=Object(q.a)(D.a.mark((function t(){var r;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J.cars();case 3:(r=t.sent)&&a(r),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e("Could not get vehicle information from server.");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}})()()}),[e]),[n]},K=function(e){var t=e.submit,r=e.updateError,n=G(r),c=Object(l.a)(n,1)[0];if(!c)return null;if(c.length<1)return Object(v.jsx)("p",{children:"Could not find any cars from database!"});var a=c.map((function(e){var t=e.id;return Object(v.jsx)("option",{value:t,children:t},t)}));return Object(v.jsxs)("div",{className:"vehicle-form",children:[Object(v.jsx)("label",{htmlFor:"vehicle",children:"Choose vehicle: "}),Object(v.jsxs)("select",{id:"vehicle",onChange:function(e){return t(e.target.value.toUpperCase())},children:[Object(v.jsx)("option",{value:"",children:"Select vehicle"}),a]})]})},L=function(e){var t=e.updateError,r=e.addHistory,n=Object(c.useState)(""),a=Object(l.a)(n,2),s=a[0],i=a[1],o=A(t,r),u=Object(l.a)(o,2),j=u[0],d=u[1],b=s&&j.data1;return Object(v.jsxs)("div",{className:"main-page",children:[Object(v.jsx)("h1",{children:" Welcome!"}),Object(v.jsx)(K,{submit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";i(e.toUpperCase()),d()},updateError:t}),Object(v.jsx)("h2",{children:s}),s?Object(v.jsx)(U,{submit:function(e){return d(Object(V.a)(Object(V.a)({},e),{},{vehicle:s}))}}):null,b?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("hr",{}),Object(v.jsx)(W,{data:j})]}):null]})},P=function(){var e=j(),t=Object(l.a)(e,2),r=t[0],n=t[1],c=h(),a=Object(l.a)(c,3),s=a[0],i=a[1],d=a[2];return Object(v.jsxs)(o.a,{children:[Object(v.jsx)(C,{}),Object(v.jsx)(H,{message:r}),Object(v.jsxs)(u.c,{children:[Object(v.jsx)(u.a,{path:"/history",children:Object(v.jsx)(E,{history:s,clearHistory:d})}),Object(v.jsx)(u.a,{path:"/",children:Object(v.jsx)(L,{updateError:n,addHistory:i})})]})]})};i.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(P,{})}),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.31e53dd8.chunk.js.map